1. **函数功能**
   - `fgets`函数用于从指定的文件流（可以是标准输入流`stdin`，也可以是打开的文件流）中读取一行字符串，并将其存储到指定的字符数组中。
   - 它的读取操作会在遇到换行符`\n`、文件结束符`EOF`或者已经读取了指定的最大字符数减1（因为要预留一个位置用于存储字符串结束符`\0`）时停止。

2. **函数原型**
   - `char *fgets(char *s, int size, FILE *stream);`
   - 其中：
     - `s`是指向字符数组的指针，用于存储读取到的字符串。
     - `size`是要读取的最大字符数（包括字符串结束符`\0`）。
     - `stream`是指向文件流的指针，例如`stdin`（标准输入）、`stdout`（标准输出）或者通过`fopen`函数打开的文件对应的文件流指针。

3. **使用示例**
   - 从标准输入读取一行字符串并打印出来：
   ```c
   #include <stdio.h>
   int main()
   {
       char str[100];
       printf("请输入一行文字：");
       fgets(str, 100, stdin);
       printf("你输入的是：%s", str);
       return 0;
   }
   ```
   - 在这个示例中：
     - 定义了一个字符数组`str`，大小为100个字符。
     - 提示用户输入一行文字，然后使用`fgets`函数从标准输入`stdin`中读取最多99个字符（因为要预留一个位置给`\0`）到`str`数组中。
     - 最后打印出用户输入的字符串。

4. **与`gets`函数的对比**
   - `gets`函数也用于从标准输入读取字符串，但它没有对输入的长度进行限制，这可能会导致缓冲区溢出的安全问题。
   - 例如，如果定义了一个小的字符数组`char buffer[10];`，使用`gets(buffer);`，当用户输入超过9个字符（不包括`\0`）时，就会发生缓冲区溢出，可能会覆盖其他内存区域，导致程序出错甚至被攻击。
   - 而`fgets`函数通过`size`参数限制了读取的最大字符数，相对更安全。

5. **注意事项**
   - 字符串结束符`\0`：`fgets`函数会在读取的字符串末尾自动添加`\0`，所以存储读取结果的字符数组大小要足够，至少为`size`个字节。
   - 换行符`\n`：如果读取的内容中包含换行符，`fgets`会将其一起读取并存储到字符数组中。例如，用户输入`Hello\n`，那么`fgets`读取到的字符串就包含`Hello\n\0`。如果想要去掉换行符，可以在使用读取到的字符串时进行处理，比如：
   ```c
   char str[100];
   fgets(str, 100, stdin);
   int len = strlen(str);
   if (len > 0 && str[len - 1] == '\n')
   {
       str[len - 1] = '\0';
   }
   ```
   - 这个代码片段检查读取到的字符串长度是否大于0，并且最后一个字符是否为换行符`\n`，如果是，则将其替换为`\0`，从而去掉换行符。
   - 文件读取：当`fgets`用于从文件读取时，例如`FILE *fp = fopen("test.txt", "r");`，然后`fgets(str, 100, fp);`，如果文件中一行的长度超过了`size - 1`，`fgets`会截断该行，读取部分内容，直到达到`size - 1`个字符，然后添加`\0`结束。如果文件为空或者到达文件末尾，`fgets`会返回`NULL`。
